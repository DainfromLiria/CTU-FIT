{"t":{"$date":"2023-11-28T13:56:20.781Z"},"s":"I","c":"MONGOSH","id":1000000000,"ctx":"log","msg":"Starting log","attr":{"execPath":"/usr/bin/mongosh","envInfo":{"EDITOR":null,"NODE_OPTIONS":null,"TERM":"xterm"},"version":"2.0.1","distributionKind":"compiled","buildArch":"x64","buildPlatform":"linux","buildTarget":"linux-x64","buildTime":"2023-09-14T09:24:48.742Z","gitVersion":"225d4603f0d43d500a8847beaa980e906e9a35be","nodeVersion":"v20.6.1","opensslVersion":"3.0.10+quic","sharedOpenssl":false,"runtimeArch":"x64","runtimePlatform":"linux","deps":{"nodeDriverVersion":"6.0.0","libmongocryptVersion":"1.9.0-20230828+git8e7f69f1c0","libmongocryptNodeBindingsVersion":"6.0.0"}}}
{"t":{"$date":"2023-11-28T13:56:20.790Z"},"s":"I","c":"MONGOSH","id":1000000005,"ctx":"config","msg":"User updated"}
{"t":{"$date":"2023-11-28T13:56:20.790Z"},"s":"I","c":"MONGOSH","id":1000000048,"ctx":"config","msg":"Loading global configuration file","attr":{"filename":"/etc/mongosh.conf","found":false}}
{"t":{"$date":"2023-11-28T13:56:20.814Z"},"s":"E","c":"DEVTOOLS-CONNECT","id":1000000041,"ctx":"mongosh-deps","msg":"Missing optional dependency","attr":{"name":"saslprep","error":"Cannot find module 'saslprep'"}}
{"t":{"$date":"2023-11-28T13:56:20.823Z"},"s":"I","c":"DEVTOOLS-CONNECT","id":1000000042,"ctx":"mongosh-connect","msg":"Initiating connection attempt","attr":{"uri":"mongodb://127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.0.1","driver":{"name":"nodejs|mongosh","version":"6.0.0|2.0.1"},"devtoolsConnectVersion":"2.4.1","host":"127.0.0.1:27017"}}
{"t":{"$date":"2023-11-28T13:56:20.825Z"},"s":"I","c":"DEVTOOLS-CONNECT","id":1000000035,"ctx":"mongosh-connect","msg":"Server heartbeat succeeded","attr":{"connectionId":"127.0.0.1:27017"}}
{"t":{"$date":"2023-11-28T13:56:20.840Z"},"s":"I","c":"DEVTOOLS-CONNECT","id":1000000037,"ctx":"mongosh-connect","msg":"Connection attempt finished"}
{"t":{"$date":"2023-11-28T13:56:20.859Z"},"s":"I","c":"MONGOSH","id":1000000004,"ctx":"connect","msg":"Connecting to server","attr":{"session_id":"6565f184d76adbb29a4eaab5","userId":null,"telemetryAnonymousId":"6564ff9cd7236425ff80bb37","connectionUri":"mongodb://<ip address>:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.0.1","is_atlas":false,"is_localhost":true,"is_do":false,"server_version":"7.0.2","node_version":"v20.6.1","mongosh_version":"2.0.1","server_os":"linux","server_arch":"x86_64","is_enterprise":false,"auth_type":null,"is_data_federation":false,"is_stream":false,"dl_version":null,"atlas_version":null,"is_genuine":true,"non_genuine_server_name":"mongodb","is_local_atlas":false,"fcv":null,"api_version":null,"api_strict":null,"api_deprecation_errors":null}}
{"t":{"$date":"2023-11-28T13:56:20.862Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"adminCommand","class":"Database","db":"test","arguments":{"cmd":{"ping":1}}}}
{"t":{"$date":"2023-11-28T13:56:20.864Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"getSiblingDB","class":"Database","db":"test","arguments":{"db":"admin"}}}
{"t":{"$date":"2023-11-28T13:56:20.944Z"},"s":"I","c":"MONGOSH","id":1000000010,"ctx":"shell-api","msg":"Initialized context","attr":{"method":"setCtx","arguments":{}}}
{"t":{"$date":"2023-11-28T13:56:20.947Z"},"s":"I","c":"MONGOSH","id":1000000009,"ctx":"shell-api","msg":"Used \"show\" command","attr":{"method":"show startupWarnings"}}
{"t":{"$date":"2023-11-28T13:56:20.947Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"adminCommand","class":"Database","db":"test","arguments":{"cmd":{"getLog":"startupWarnings"}}}}
{"t":{"$date":"2023-11-28T13:56:20.948Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"getSiblingDB","class":"Database","db":"test","arguments":{"db":"admin"}}}
{"t":{"$date":"2023-11-28T13:56:20.949Z"},"s":"I","c":"MONGOSH","id":1000000009,"ctx":"shell-api","msg":"Used \"show\" command","attr":{"method":"show automationNotices"}}
{"t":{"$date":"2023-11-28T13:56:20.951Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"hello","class":"Database","db":"test","arguments":{}}}
{"t":{"$date":"2023-11-28T13:56:20.954Z"},"s":"I","c":"MONGOSH","id":1000000009,"ctx":"shell-api","msg":"Used \"show\" command","attr":{"method":"show nonGenuineMongoDBCheck"}}
{"t":{"$date":"2023-11-28T13:56:20.955Z"},"s":"I","c":"MONGOSH-SNIPPETS","id":1000000024,"ctx":"snippets","msg":"Fetching snippet index","attr":{"refreshMode":"allow-cached"}}
{"t":{"$date":"2023-11-28T13:56:20.955Z"},"s":"I","c":"MONGOSH-SNIPPETS","id":1000000019,"ctx":"snippets","msg":"Loaded snippets","attr":{"installdir":"/data/db/.mongodb/mongosh/snippets"}}
{"t":{"$date":"2023-11-28T13:56:20.960Z"},"s":"I","c":"MONGOSH-SNIPPETS","id":1000000027,"ctx":"snippets","msg":"Fetching snippet index done"}
{"t":{"$date":"2023-11-28T13:56:20.970Z"},"s":"I","c":"MONGOSH","id":1000000002,"ctx":"repl","msg":"Started REPL","attr":{"version":"2.0.1"}}
{"t":{"$date":"2023-11-28T13:56:26.518Z"},"s":"I","c":"MONGOSH","id":1000000008,"ctx":"shell-api","msg":"Used \"use\" command","attr":{"db":"shop"}}
{"t":{"$date":"2023-11-28T13:56:26.540Z"},"s":"I","c":"MONGOSH","id":1000000004,"ctx":"connect","msg":"Connecting to server","attr":{"session_id":"6565f184d76adbb29a4eaab5","userId":null,"telemetryAnonymousId":"6564ff9cd7236425ff80bb37","connectionUri":"mongodb://<ip address>:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.0.1","is_atlas":false,"is_localhost":true,"is_do":false,"server_version":"7.0.2","node_version":"v20.6.1","mongosh_version":"2.0.1","server_os":"linux","server_arch":"x86_64","is_enterprise":false,"auth_type":null,"is_data_federation":false,"is_stream":false,"dl_version":null,"atlas_version":null,"is_genuine":true,"non_genuine_server_name":"mongodb","is_local_atlas":false,"fcv":null,"api_version":null,"api_strict":null,"api_deprecation_errors":null}}
{"t":{"$date":"2023-11-28T14:21:41.581Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:21:41.657Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:22:22.475Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n      battery_type: \"$battery_type\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:22:22.481Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life","battery_type":"$battery_type"}}]}}}
{"t":{"$date":"2023-11-28T14:23:34.121Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n    }\n  }\n]).pretty()"}}
{"t":{"$date":"2023-11-28T14:23:34.129Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:34:21.118Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: { $avg: \"$customers.price\" }, product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] ).pretty()"}}
{"t":{"$date":"2023-11-28T14:34:21.124Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:37:38.962Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token, expected \",\" (18:2)\n\n\u001b[0m \u001b[90m 16 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m 17 |\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 18 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 19 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":18,"column":2,"index":310},"pos":310,"message":"Unexpected token, expected \",\" (18:2)\n\n\u001b[0m \u001b[90m 16 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m 17 |\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 18 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 19 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token, expected \",\" (18:2)\n\n\u001b[0m \u001b[90m 16 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m 17 |\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 18 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 19 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:37:39.052Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Missing semicolon. (3:11)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       price\u001b[33m:\u001b[39m { $avg\u001b[33m:\u001b[39m \u001b[32m\"$customers.price\"\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"MissingSemicolon","loc":{"line":3,"column":11,"index":41},"pos":41,"message":"Missing semicolon. (3:11)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       price\u001b[33m:\u001b[39m { $avg\u001b[33m:\u001b[39m \u001b[32m\"$customers.price\"\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Missing semicolon. (3:11)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       price\u001b[33m:\u001b[39m { $avg\u001b[33m:\u001b[39m \u001b[32m\"$customers.price\"\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:37:39.053Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"MissingSemicolon","loc":{"line":2,"column":22,"index":59},"pos":59,"message":"Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:37:39.053Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":4,"index":4},"pos":4,"message":"Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:37:39.053Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":2,"index":2},"pos":2,"message":"Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:38:01.496Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  { $inc: { max_battery_life: 10 } }, \n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $inc: { \"customers.price\": 100 },\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:38:01.502Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$inc":{"max_battery_life":10}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$inc":{"customers.price":100}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:38:01.512Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: Unrecognized pipeline stage name: '$inc'","attr":{"ok":0,"code":40324,"codeName":"Location40324","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701182281,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701182281,"i":1}},"message":"Unrecognized pipeline stage name: '$inc'","name":"MongoServerError","stack":"MongoServerError: Unrecognized pipeline stage name: '$inc'\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T14:38:34.440Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  { $inc: { max_battery_life: 10 } }, \n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  { $inc: { \"customers.price\": 100 } },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:38:34.447Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$inc":{"max_battery_life":10}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$inc":{"customers.price":100}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:38:34.454Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: Unrecognized pipeline stage name: '$inc'","attr":{"ok":0,"code":40324,"codeName":"Location40324","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701182311,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701182311,"i":2}},"message":"Unrecognized pipeline stage name: '$inc'","name":"MongoServerError","stack":"MongoServerError: Unrecognized pipeline stage name: '$inc'\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.010Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token, expected \",\" (9:2)\n\n\u001b[0m \u001b[90m  7 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 10 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":9,"column":2,"index":159},"pos":159,"message":"Unexpected token, expected \",\" (9:2)\n\n\u001b[0m \u001b[90m  7 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 10 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token, expected \",\" (9:2)\n\n\u001b[0m \u001b[90m  7 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m  8 |\u001b[39m   \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 10 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.311Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Missing semicolon. (3:16)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $lookup\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       \u001b[36mfrom\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"shopCollection\"\u001b[39m\u001b[33m,\u001b[39m \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       localField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"MissingSemicolon","loc":{"line":3,"column":16,"index":62},"pos":62,"message":"Missing semicolon. (3:16)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $lookup\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       \u001b[36mfrom\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"shopCollection\"\u001b[39m\u001b[33m,\u001b[39m \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       localField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Missing semicolon. (3:16)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m     $lookup\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m       \u001b[36mfrom\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"shopCollection\"\u001b[39m\u001b[33m,\u001b[39m \u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m       localField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.312Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Missing semicolon. (2:8)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       foreignField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       \u001b[36mas\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"customers\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"MissingSemicolon","loc":{"line":2,"column":8,"index":44},"pos":44,"message":"Missing semicolon. (2:8)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       foreignField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       \u001b[36mas\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"customers\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Missing semicolon. (2:8)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       foreignField\u001b[33m:\u001b[39m \u001b[32m\"product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       \u001b[36mas\u001b[39m\u001b[33m:\u001b[39m \u001b[32m\"customers\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.313Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":4,"index":4},"pos":4,"message":"Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.313Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":2,"index":2},"pos":2,"message":"Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T14:41:48.313Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":""}}
{"t":{"$date":"2023-11-28T14:41:48.314Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"// { $inc: { \"customers.price\": 100 } },"}}
{"t":{"$date":"2023-11-28T14:41:48.314Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":""}}
{"t":{"$date":"2023-11-28T14:42:10.690Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] }\n    }\n  },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  // { $inc: { \"customers.price\": 100 } },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:42:10.699Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:43:27.710Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  {\n    $subtract: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] }\n    }\n  },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  // { $inc: { \"customers.price\": 100 } },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:43:27.716Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$subtract":{"max_battery_life":{"$add":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:43:27.724Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: Unrecognized pipeline stage name: '$subtract'","attr":{"ok":0,"code":40324,"codeName":"Location40324","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701182604,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701182604,"i":2}},"message":"Unrecognized pipeline stage name: '$subtract'","name":"MongoServerError","stack":"MongoServerError: Unrecognized pipeline stage name: '$subtract'\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T14:44:12.562Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  {\n    $set: {\n      \"max_battery_life\": { $subtract: [\"$max_battery_life\", 10] }\n    }\n  },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  // { $inc: { \"customers.price\": 100 } },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:44:12.569Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$set":{"max_battery_life":{"$subtract":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:44:43.799Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: { $avg: \"$customers.price\" },\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:44:43.805Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":{"$avg":"$customers.price"},"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:45:48.273Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:45:48.279Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:46:58.670Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  {\n    $set: {\n      \"max_battery_life\": { $subtract: [\"$max_battery_life\", 10] }\n    }\n  },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  // { $inc: { \"customers.price\": 100 } },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:46:58.674Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$set":{"max_battery_life":{"$subtract":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:47:04.840Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:47:04.846Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:47:40.735Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $set: { \"max_battery_life\": { $subtract: [\"$max_battery_life\", 10] } } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, /* { $inc: { \"customers.price\": 100 } },*/ { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:47:40.740Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$set":{"max_battery_life":{"$subtract":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:48:07.246Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:48:07.251Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:48:19.607Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:48:19.612Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:48:26.242Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:48:26.247Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:48:27.132Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:48:27.138Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:48:36.430Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $set: { \"max_battery_life\": { $subtract: [\"$max_battery_life\", 10] } } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, /* { $inc: { \"customers.price\": 100 } },*/ { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:48:36.436Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$set":{"max_battery_life":{"$subtract":["$max_battery_life",10]}}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:49:55.788Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $project: { _id: 0, price: \"$customers.price\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:49:55.791Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:50:03.694Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $add: [\"$customers.price\", 100] }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:50:03.700Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$add":["$customers.price",100]}}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:50:03.714Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: Error on remote shard 172.17.0.1:27023 :: caused by :: Executor error during getMore :: caused by :: $add only supports numeric or date types, not array","attr":{"ok":0,"code":14,"codeName":"TypeMismatch","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701183002,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701182999,"i":1}},"message":"Error on remote shard 172.17.0.1:27023 :: caused by :: Executor error during getMore :: caused by :: $add only supports numeric or date types, not array","name":"MongoServerError","stack":"MongoServerError: Error on remote shard 172.17.0.1:27023 :: caused by :: Executor error during getMore :: caused by :: $add only supports numeric or date types, not array\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T14:51:49.472Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:51:49.478Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:53:21.893Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price[0]\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:53:21.899Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":"$customers.price[0]","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:53:46.015Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $set: { \"max_battery_life\": { $add: [\"$max_battery_life\", 10] }, \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } } } }, { $project: { _id: 0, price: \"$customers.price[1]\", product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T14:53:46.019Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":"$customers.price[1]","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:55:20.447Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      \"customers.price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:55:20.452Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"customers.price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:55:47.231Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      \"customers.price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:55:47.237Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"customers.price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T14:56:22.931Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T14:56:22.935Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:00:01.765Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  },\n\n  {\n    $match: {\n      \"product_name\": \"ElectroMax-6000\" \n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      \"customers.price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:00:01.770Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$match":{"product_name":"ElectroMax-6000"}},{"$project":{"_id":0,"customers.price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:01:35.643Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:01:35.652Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}}]}}}
{"t":{"$date":"2023-11-28T15:02:56.576Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      \"price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:02:56.584Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:02:57.015Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":""}}
{"t":{"$date":"2023-11-28T15:03:04.576Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      \"price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:03:04.585Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:03:25.276Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      price: 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:03:25.280Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:03:47.803Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token, expected \",\" (23:15)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 22 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m       customers\u001b[33m.\u001b[39mprice\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 24 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":23,"column":15,"index":466},"pos":466,"message":"Unexpected token, expected \",\" (23:15)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 22 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m       customers\u001b[33m.\u001b[39mprice\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 24 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token, expected \",\" (23:15)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m     $project\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m 22 |\u001b[39m       _id\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m       customers\u001b[33m.\u001b[39mprice\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 24 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:03:47.838Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"MissingSemicolon","loc":{"line":2,"column":22,"index":59},"pos":59,"message":"Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Missing semicolon. (2:22)\n\n\u001b[0m \u001b[90m 1 |\u001b[39m       product_name\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m       max_battery_life\u001b[33m:\u001b[39m \u001b[32m\"$max_battery_life\"\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 3 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:03:47.839Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":4,"index":4},"pos":4,"message":"Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:03:47.839Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":2,"index":2},"pos":2,"message":"Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:04:40.312Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      price: \"customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:04:40.317Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":"customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:05:17.657Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:05:17.664Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:06:02.518Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      \"$customers.price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:06:02.522Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"$customers.price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:06:02.532Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: Invalid $project :: caused by :: FieldPath field names may not start with '$'. Consider using $getField or $setField.","attr":{"ok":0,"code":16410,"codeName":"Location16410","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701183957,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701183957,"i":1}},"message":"Invalid $project :: caused by :: FieldPath field names may not start with '$'. Consider using $getField or $setField.","name":"MongoServerError","stack":"MongoServerError: Invalid $project :: caused by :: FieldPath field names may not start with '$'. Consider using $getField or $setField.\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T15:06:15.941Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      \"customers.price\": 1,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:06:15.949Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"customers.price":1,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:07:27.870Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $subtract: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:07:27.874Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$subtract":["$$this",100]}}}}},{"$project":{"_id":0,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:08:59.976Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      price: \"$customers.price\",\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\",\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:08:59.985Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$project":{"_id":0,"price":"$customers.price","product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:09:50.284Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"battery_type\": \"Li-Po\" } },\n  \n  {\n    $lookup: {\n      from: \"shopCollection\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"customers\"\n    }\n  },\n\n  {\n    $set: {\n      \"max_battery_life\": { $add: [\"$max_battery_life\", 10] },\n      \"customers.price\": { $map: { input: \"$customers.price\", in: { $add: [\"$$this\", 100] } } }\n    }\n  }, \n  \n  {\n    $project: {\n      _id: 0,\n      product_name: \"$product_name\",\n      max_battery_life: \"$max_battery_life\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:09:50.288Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$add":["$$this",100]}}}}},{"$project":{"_id":0,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:10:02.085Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $set: { \"max_battery_life\": { $add: [\"$max_battery_life\", 10] }, \"customers.price\": { $map: { input: \"$customers.price\", in: { $add: [\"$$this\", 100] } } } } }, { $project: { _id: 0, product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T15:10:02.092Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$add":["$$this",100]}}}}},{"$project":{"_id":0,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:10:03.516Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"battery_type\": \"Li-Po\" } }, { $lookup: { from: \"shopCollection\", localField: \"product_name\", foreignField: \"product_name\", as: \"customers\" } }, { $set: { \"max_battery_life\": { $add: [\"$max_battery_life\", 10] }, \"customers.price\": { $map: { input: \"$customers.price\", in: { $add: [\"$$this\", 100] } } } } }, { $project: { _id: 0, product_name: \"$product_name\", max_battery_life: \"$max_battery_life\" } }] )"}}
{"t":{"$date":"2023-11-28T15:10:03.520Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"battery_type":"Li-Po"}},{"$lookup":{"from":"shopCollection","localField":"product_name","foreignField":"product_name","as":"customers"}},{"$set":{"max_battery_life":{"$add":["$max_battery_life",10]},"customers.price":{"$map":{"input":"$customers.price","in":{"$add":["$$this",100]}}}}},{"$project":{"_id":0,"product_name":"$product_name","max_battery_life":"$max_battery_life"}}]}}}
{"t":{"$date":"2023-11-28T15:19:24.031Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $group: {\n      _id: {\n        gender: \"$gender\",\n        category: \"$category\"\n      },\n      total_count: { $sum: 1 }\n    }\n  },\n\n  {\n    $match: {\n      _id: { gender: 'Female', category: 'laptop' }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      category: \"$_id\",\n      total_count: \"$total_count\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:19:24.037Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$group":{"_id":{"gender":"$gender","category":"$category"},"total_count":{"$sum":1}}},{"$match":{"_id":{"gender":"Female","category":"laptop"}}},{"$project":{"_id":0,"category":"$_id","total_count":"$total_count"}}]}}}
{"t":{"$date":"2023-11-28T15:24:37.082Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $group: {\n      _id: {\n        gender: \"$gender\",\n        category: \"$category\"\n      }\n    }\n  },\n\n  {\n    $match: {\n      _id: { gender: 'Female', category: 'laptop' }\n    }\n  },\n\n  {\n    $lookup: {\n      from: \"device\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"dev\"\n    }\n  },\n\n  {\n    $group: {\n      _id: {\n        product_name: \"$dev.product_name\",\n        color: \"$dev.color\"\n      },\n      total_count: { $sum: 1 }\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      color: \"$dev.color\",\n      total_count: \"$total_count\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:24:37.090Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$group":{"_id":{"gender":"$gender","category":"$category"}}},{"$match":{"_id":{"gender":"Female","category":"laptop"}}},{"$lookup":{"from":"device","localField":"product_name","foreignField":"product_name","as":"dev"}},{"$group":{"_id":{"product_name":"$dev.product_name","color":"$dev.color"},"total_count":{"$sum":1}}},{"$project":{"_id":0,"color":"$dev.color","total_count":"$total_count"}}]}}}
{"t":{"$date":"2023-11-28T15:25:15.237Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $group: {\n      _id: {\n        gender: \"$gender\",\n        category: \"$category\"\n      }\n    }\n  },\n\n  {\n    $match: {\n      _id: { gender: 'Female', category: 'laptop' }\n    }\n  },\n\n  {\n    $lookup: {\n      from: \"device\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"dev\"\n    }\n  },\n\n  {\n    $group: {\n      _id: {\n        product_name: \"$dev.product_name\",\n        color: \"$dev.color\"\n      },\n      total_count: { $sum: 1 }\n    }\n  }\n\n\n])"}}
{"t":{"$date":"2023-11-28T15:25:15.242Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$group":{"_id":{"gender":"$gender","category":"$category"}}},{"$match":{"_id":{"gender":"Female","category":"laptop"}}},{"$lookup":{"from":"device","localField":"product_name","foreignField":"product_name","as":"dev"}},{"$group":{"_id":{"product_name":"$dev.product_name","color":"$dev.color"},"total_count":{"$sum":1}}}]}}}
{"t":{"$date":"2023-11-28T15:27:48.897Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $group: {\n      _id: {\n        gender: \"$gender\",\n        category: \"$category\"\n      }\n    }\n  },\n\n  {\n    $match: {\n      _id: { gender: 'Female', category: 'laptop' }\n    }\n  },\n\n  {\n    $lookup: {\n      from: \"device\", \n      localField: \"product_name\",\n      foreignField: \"product_name\",\n      as: \"dev\"\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:27:48.902Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$group":{"_id":{"gender":"$gender","category":"$category"}}},{"$match":{"_id":{"gender":"Female","category":"laptop"}}},{"$lookup":{"from":"device","localField":"product_name","foreignField":"product_name","as":"dev"}}]}}}
{"t":{"$date":"2023-11-28T15:48:01.525Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token, expected \",\" (5:19)\n\n\u001b[0m \u001b[90m 3 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m     $group\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m       _id\u001b[33m:\u001b[39m category\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 6 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":5,"column":19,"index":99},"pos":99,"message":"Unexpected token, expected \",\" (5:19)\n\n\u001b[0m \u001b[90m 3 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m     $group\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m       _id\u001b[33m:\u001b[39m category\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 6 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token, expected \",\" (5:19)\n\n\u001b[0m \u001b[90m 3 |\u001b[39m   {\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m     $group\u001b[33m:\u001b[39m {\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m       _id\u001b[33m:\u001b[39m category\u001b[33m:\u001b[39m \u001b[32m\"$product_name\"\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 6 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:48:01.573Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"max_rating: {$max: \"$rating\"}"}}
{"t":{"$date":"2023-11-28T15:48:01.573Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":4,"index":4},"pos":4,"message":"Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:4)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m     }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:48:01.573Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","attr":{"code":"BABEL_PARSE_ERROR","reasonCode":"UnexpectedToken","loc":{"line":1,"column":2,"index":2},"pos":2,"message":"Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m","name":"SyntaxError","stack":"SyntaxError: Unexpected token (1:2)\n\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m   }\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n","cause":null}}
{"t":{"$date":"2023-11-28T15:49:46.751Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:49:46.756Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}}]}}}
{"t":{"$date":"2023-11-28T15:51:48.967Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"category\": \"laptop\" } }] )"}}
{"t":{"$date":"2023-11-28T15:51:48.970Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}}]}}}
{"t":{"$date":"2023-11-28T15:52:44.987Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      product_name: \"$_id\",\n      max_rating: \"$max_rating\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:52:44.990Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}},{"$project":{"_id":0,"product_name":"$_id","max_rating":"$max_rating"}}]}}}
{"t":{"$date":"2023-11-28T15:54:14.800Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.device.aggregate([ { $match: { \"category\": \"laptop\" } }] )"}}
{"t":{"$date":"2023-11-28T15:54:14.805Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"device","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}}]}}}
{"t":{"$date":"2023-11-28T15:54:55.097Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      product_name: \"$_id\",\n      max_rating: \"$max_rating\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:54:55.100Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}},{"$project":{"_id":0,"product_name":"$_id","max_rating":"$max_rating"}}]}}}
{"t":{"$date":"2023-11-28T15:59:38.321Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  },\n\n  { $match: { \"rating\": 5 } },\n\n\n  {\n    $project: {\n      _id: 0,\n      product_name: \"$_id\",\n      max_rating: \"$max_rating\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T15:59:38.326Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}},{"$match":{"rating":5}},{"$project":{"_id":0,"product_name":"$_id","max_rating":"$max_rating"}}]}}}
{"t":{"$date":"2023-11-28T16:00:04.690Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  },\n\n  { $match: { \"max_rating\": 5 } },\n\n\n  {\n    $project: {\n      _id: 0,\n      product_name: \"$_id\",\n      max_rating: \"$max_rating\" \n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T16:00:04.694Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}},{"$match":{"max_rating":5}},{"$project":{"_id":0,"product_name":"$_id","max_rating":"$max_rating"}}]}}}
{"t":{"$date":"2023-11-28T16:05:03.676Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { \"category\": \"laptop\" } },\n  \n  {\n    $group: {\n      _id: \"$product_name\",\n      max_rating: {$max: \"$rating\"}\n    }\n  },\n\n  { $match: { \"max_rating\": 5 } },\n\n  {\n    $project: {\n      _id: 0,\n      product_name: \"$_id\",\n    }\n  }\n])"}}
{"t":{"$date":"2023-11-28T16:05:03.682Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"category":"laptop"}},{"$group":{"_id":"$product_name","max_rating":{"$max":"$rating"}}},{"$match":{"max_rating":5}},{"$project":{"_id":0,"product_name":"$_id"}}]}}}
{"t":{"$date":"2023-11-28T16:11:14.329Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $match: {\n      age: { $gt: 60 },\n      country: \"Germany\",\n    }\n  },\n\n  {\n    $group: {\n      _id: \"$category\",\n      avg_price: {$avg: \"$price\"}\n    }\n  },\n\n  {\n    $group: {\n      _id: 0,\n      category: \"$_id\",\n      averagePrice: \"$avg_price\"\n    }\n  },\n])"}}
{"t":{"$date":"2023-11-28T16:11:14.333Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"age":{"$gt":60},"country":"Germany"}},{"$group":{"_id":"$category","avg_price":{"$avg":"$price"}}},{"$group":{"_id":0,"category":"$_id","averagePrice":"$avg_price"}}]}}}
{"t":{"$date":"2023-11-28T16:11:14.338Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: The field 'category' must be an accumulator object","attr":{"ok":0,"code":40234,"codeName":"Location40234","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701187872,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701187872,"i":1}},"message":"The field 'category' must be an accumulator object","name":"MongoServerError","stack":"MongoServerError: The field 'category' must be an accumulator object\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T16:13:15.039Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  {\n    $match: {\n      age: { $gt: 60 },\n      country: \"Germany\",\n    }\n  },\n\n  {\n    $group: {\n      _id: \"$category\",\n      avg_price: {$avg: \"$price\"}\n    }\n  },\n\n  {\n    $project: {\n      _id: 0,\n      category: \"$_id\",\n      averagePrice: \"$avg_price\"\n    }\n  },\n])"}}
{"t":{"$date":"2023-11-28T16:13:15.042Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"age":{"$gt":60},"country":"Germany"}},{"$group":{"_id":"$category","avg_price":{"$avg":"$price"}}},{"$project":{"_id":0,"category":"$_id","averagePrice":"$avg_price"}}]}}}
{"t":{"$date":"2023-11-28T16:25:57.315Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { provider: \"TechPro\" } },\n\n  {\n    $group: {\n      _id: \"$category\",\n      max_price: { $max: \"$price\" }\n    }\n  },\n\n  { max_prc: { $max: \"$max_price\" } },\n\n  { $match: { max_price: max_prc } },\n\n  {\n    $project: {\n      _id: 0,\n      category: \"$_id\",\n      averagePrice: \"$max_price\"\n    }\n  },\n])"}}
{"t":{"$date":"2023-11-28T16:25:57.322Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"ReferenceError: max_prc is not defined","attr":{"message":"max_prc is not defined","name":"ReferenceError","stack":"ReferenceError: max_prc is not defined\n    at REPL1157:42:52\n    at REPL1157:64:5\n    at REPL1157:68:3\n    at Script.runInContext (node:vm:134:12)\n    at PrettyREPLServer.defaultEval (node:repl:595:29)\n    at bound (node:domain:433:15)\n    at PrettyREPLServer.runBound (node:domain:444:12)\n    at /tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:10:19169\n    at /tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:10:18897\n    at node:internal/util:411:7","cause":null}}
{"t":{"$date":"2023-11-28T16:26:40.403Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { provider: \"TechPro\" } },\n\n  {\n    $group: {\n      _id: \"$category\",\n      max_price: { $max: \"$price\" }\n    }\n  },\n\n  //{ max_prc: { $max: \"$max_price\" } },\n\n  { $match: { max_price: { $max: \"$max_price\" } } },\n\n  {\n    $project: {\n      _id: 0,\n      category: \"$_id\",\n      averagePrice: \"$max_price\"\n    }\n  },\n])"}}
{"t":{"$date":"2023-11-28T16:26:40.411Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"provider":"TechPro"}},{"$group":{"_id":"$category","max_price":{"$max":"$price"}}},{"$match":{"max_price":{"$max":"$max_price"}}},{"$project":{"_id":0,"category":"$_id","averagePrice":"$max_price"}}]}}}
{"t":{"$date":"2023-11-28T16:26:40.419Z"},"s":"E","c":"MONGOSH","id":1000000006,"ctx":"repl","msg":"MongoServerError: unknown operator: $max","attr":{"ok":0,"code":2,"codeName":"BadValue","$clusterTime":{"clusterTime":{"$timestamp":{"t":1701188797,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"00"}},"keyId":0}},"operationTime":{"$timestamp":{"t":1701188797,"i":1}},"message":"unknown operator: $max","name":"MongoServerError","stack":"MongoServerError: unknown operator: $max\n    at Connection.onMessage (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2452900)\n    at MessageStream.<anonymous> (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2450786)\n    at MessageStream.emit (node:events:514:28)\n    at MessageStream.emit (node:domain:489:12)\n    at p (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2476994)\n    at MessageStream._write (/tmp/m/boxednode/mongosh/node-v20.6.1/out/Release/node:2:2475615)\n    at writeOrBuffer (node:internal/streams/writable:399:12)\n    at _write (node:internal/streams/writable:340:10)\n    at Writable.write (node:internal/streams/writable:344:10)\n    at Socket.ondata (node:internal/streams/readable:785:22)\n    at Socket.emit (node:events:514:28)\n    at Socket.emit (node:domain:489:12)\n    at addChunk (node:internal/streams/readable:343:12)\n    at readableAddChunk (node:internal/streams/readable:316:9)\n    at Readable.push (node:internal/streams/readable:253:10)\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","cause":null}}
{"t":{"$date":"2023-11-28T16:30:07.209Z"},"s":"I","c":"MONGOSH","id":1000000007,"ctx":"repl","msg":"Evaluating input","attr":{"input":"db.shopCollection.aggregate([\n  { $match: { provider: \"TechPro\" } },\n\n  {\n    $group: {\n      _id: \"$category\",\n      max_price: { $max: \"$price\" }\n    }\n  },\n\n  { $sort: { max_price: -1 } },\n  { $limit: 1 },\n\n  {\n    $project: {\n      _id: 0,\n      category: \"$_id\",\n      averagePrice: \"$max_price\"\n    }\n  },\n])"}}
{"t":{"$date":"2023-11-28T16:30:07.214Z"},"s":"I","c":"MONGOSH","id":1000000011,"ctx":"shell-api","msg":"Performed API call","attr":{"method":"aggregate","class":"Collection","db":"shop","coll":"shopCollection","arguments":{"options":{},"pipeline":[{"$match":{"provider":"TechPro"}},{"$group":{"_id":"$category","max_price":{"$max":"$price"}}},{"$sort":{"max_price":-1}},{"$limit":1},{"$project":{"_id":0,"category":"$_id","averagePrice":"$max_price"}}]}}}
{"t":{"$date":"2023-11-28T16:37:34.754Z"},"s":"I","c":"MONGOSH","id":1000000045,"ctx":"analytics","msg":"Flushed outstanding data","attr":{"flushError":null,"flushDuration":2}}
